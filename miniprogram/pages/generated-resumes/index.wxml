<view class="page-container">
  <view class="header-section" wx:if="{{resumes.length > 0}}">
    <text class="count-text">å…± {{resumes.length}} ä»½ç®€å†èµ„äº§</text>
  </view>

  <view class="list-section">
    <block wx:if="{{loading && resumes.length === 0}}">
      <view class="loading-state">
        <view class="spinner"></view>
        <text>åŠ è½½ä¸­...</text>
      </view>
    </block>

    <block wx:elif="{{resumes.length > 0}}">
      <view class="resume-card {{item.status === 'processing' ? 'card-processing' : ''}} {{item.status === 'failed' ? 'card-failed' : ''}}" 
            wx:for="{{resumes}}" wx:key="_id" 
            bindtap="onPreviewResume" data-item="{{item}}" 
            hover-class="{{item.status === 'completed' ? 'card-hover' : ''}}">
        <view class="card-left">
          <view class="pdf-icon-box {{item.status === 'processing' ? 'pdf-icon-processing' : ''}} {{item.status === 'failed' ? 'pdf-icon-failed' : ''}}">
            <text class="pdf-text">{{item.status === 'failed' ? 'ERR' : 'PDF'}}</text>
            <view class="pdf-decoration" wx:if="{{item.status !== 'failed'}}"></view>
          </view>
        </view>
        
        <view class="card-body">
          <view class="title-row">
            <text class="job-title">{{item.jobTitle}}</text>
            <view wx:if="{{item.isApplied}}" class="applied-tag">å·²æŠ•é€’</view>
            <view wx:if="{{item.status === 'processing'}}" class="processing-tag">ç”Ÿæˆä¸­...</view>
            <view wx:if="{{item.status === 'failed'}}" class="failed-tag">å¤±è´¥</view>
          </view>
          <text class="company-name">{{item.company || 'é€šç”¨ç®€å†'}}</text>
          <text class="date-text">{{item.formattedDate}}</text>
        </view>

        <view class="card-right">
          <block wx:if="{{item.status === 'processing'}}">
            <view class="mini-spinner"></view>
          </block>
          <block wx:elif="{{item.status === 'failed'}}">
            <text class="retry-text">ç‚¹å‡»é‡è¯•</text>
          </block>
          <block wx:else>
            <view class="view-btn">æŸ¥çœ‹</view>
          </block>
        </view>
      </view>
    </block>

    <block wx:else>
      <view class="empty-state">
        <view class="empty-icon">ğŸ“„</view>
        <text class="empty-title">è¿˜æ²¡æœ‰ AI ä¸ºä½ å®šåˆ¶çš„ç®€å†</text>
        <text class="empty-subtitle">å¿«å»æ¢ç´¢å²—ä½ï¼Œè®© AI å¸®ä½ å†™ç®€å†å§</text>
        <button class="go-jobs-btn" bindtap="goJobsList">å»çœ‹çœ‹å²—ä½</button>
      </view>
    </block>
  </view>

  <view class="bottom-safe-area"></view>
</view>

